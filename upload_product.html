<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@500;900&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Acme&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="statics/css/upload_products.css">

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
  </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
  </script>
  <script src="https://kit.fontawesome.com/3a065c1b27.js" crossorigin="anonymous"></script>
  <!-- 範例的JavaScript -->
  <script src="statics/js/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
</head>

<body>
  <header style="box-shadow:3px 3px 5px 2px #cccccc;">
    <div class='container'>
      <nav class="navbar navbar-expand-lg navbar-light px-5">
        <a class="navbar-brand" href="#">
          <img src='statics/img/logo.png'>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse px-5" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto px-2">
            <li class="nav-item px-2">
              <a class="nav-link" href="home.html">首頁</a>
            </li>
            <li class="nav-item px-2">
              <a class="nav-link" href="center.html">會員中心</a>
            </li>
            <li class="nav-item px-2">
              <a class="nav-link" style="color: #ff8800;" href="#">熱門搜尋</a>
            </li>
            <li class="nav-item dropdown px-3">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                商品清單
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="res_list.html">預約清單</a>
                <a class="dropdown-item" href="center.tl.html">追蹤清單</a>
                <a class="dropdown-item" href="#">售屋清單</a>
              </div>
            </li>
            <li class="nav-item px-2">
              <a class="nav-link" href="#">常見問題</a>
            </li>
            <li class="nav-item px-2">
              <a class="nav-link" href="#">聯絡我們</a>
            </li>
          </ul>
        </div>
        <div class="nav-user-block" style="height: 50px;" onmouseover="switchMenu('MainMenu', 'SubMenu', 'MouseOver')"
          onmouseout="hideMenu()">
          <div class="nav-user" style="margin-top: -10px;">
            <span class="d-none d-lg-block">
              <span class="nav-user-wrapper dropdown py-3">
                <span class="nav-user-login mr-3">
                  <span class="main-menu" id="MainMenu" style="display:block;">
                    <i class="fas fa-user-circle" style="font-size: 1.6em;"></i>
                  </span>
                </span>
                <div id="SubMenu" class="dropdown-menu dropdown-origin-width" style="display:none;">
                  <a class="dropdown-item" href="#" style="color:  rgba(0, 0, 0, 0.87);">會員登出</a>
                </div>
              </span>
            </span>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <div class="container" style="padding-top: 100px;">

    <section class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">刊登房屋</h3>
      </div>

      <div class="panel-body">

        <form action="designer-finish.html" class="form-horizontal" role="form">

          <div class="row">
            <div class="col-6">

              <div class="form-group">
                <label for="name" class="col-sm-3 control-label">上傳房屋照片:</label>
                <div class="col-md-12">
                  <div id="imgPreview">
                    <div id="prompt1">
                      <span id="imgSpan">
                        請上傳房屋照片
                        <br />
                        <i class="fas fa-camera"></i>
                      </span>
                      <input type="file" id="file1" class="filepath" onchange="changepic1(this)"
                        accept="image/jpg,image/jpeg,image/png,image/PNG">
                      <!--當vaule值改變時執行changepic函式，規定上傳的檔案只能是圖片-->
                    </div>
                    <img src="#" id="img1" />
                  </div>
                </div>
                <div class="col-md-12">
                  <div id="imgPreview">
                    <div id="prompt1">
                      <span id="imgSpan">
                        請上傳房屋照片
                        <br />
                        <i class="fas fa-camera"></i>
                      </span>
                      <input type="file" id="file2" class="filepath" onchange="changepic1(this)"
                        accept="image/jpg,image/jpeg,image/png,image/PNG">
                      <!--當vaule值改變時執行changepic函式，規定上傳的檔案只能是圖片-->
                    </div>
                    <img src="#" id="img2" />
                  </div>
                </div>
                <div class="col-md-12">
                  <div id="imgPreview">
                    <div id="prompt1">
                      <span id="imgSpan">
                        請上傳房屋照片
                        <br />
                        <i class="fas fa-camera"></i>
                      </span>
                      <input type="file" id="file1" class="filepath" onchange="changepic1(this)"
                        accept="image/jpg,image/jpeg,image/png,image/PNG">
                      <!--當vaule值改變時執行changepic函式，規定上傳的檔案只能是圖片-->
                    </div>
                    <img src="#" id="img3" />
                  </div>
                </div>
              </div> <!-- form-group // -->
            </div>

            <div class="col-6">

              <div class="form-group">
                <label for="name" class="col-sm-5 control-label">房屋名稱</label>
                <div class="col-sm-12">
                  <input type="text" class="form-control" name="name" id="productcol" placeholder="輸入房屋名稱">
                </div>
              </div> <!-- form-group // -->
              <div class="form-group">
                <label for="name" class="col-sm-3 control-label">輸入房屋格局</label>
                <div class="col-sm-12">
                  <input type="text" class="form-control" name="name" id="layout" placeholder="輸入房屋格局">
                </div>
              </div> <!-- form-group // -->
              <div class="form-group">
                <label for="name" class="col-sm-3 control-label">輸入房屋地址</label>
                <div class="col-sm-12">
                  <input type="text" class="form-control" name="name" id="location" placeholder="輸入房屋地址">
                </div>
              </div> <!-- form-group // -->
              <div class="form-group">
                <label for="about" class="col-sm-3 control-label">介紹你的房屋</label>
                <div class="col-sm-12">
                  <textarea class="form-control" id="detail"></textarea>
                </div>
              </div> <!-- form-group // -->
              <div class="form-group">
                <label for="qty" class="col-sm-3 control-label">坪數</label>
                <div class="col-sm-3">
                  <input type="text" class="form-control" name="qty" id="square" placeholder="坪">
                </div>
                <hr />
              </div> <!-- form-group // -->
              <div class="form-group">
                <label for="qty" class="col-sm-3 control-label">價格</label>
                <div class="col-sm-3">
                  <input type="text" class="form-control" name="qty" id="price" placeholder="元">
                </div>
                <hr />
              </div> <!-- form-group // -->
              <div class="form-group">
                <label for="name" class="col-sm-3 control-label">是否為凶宅</label>
                <div class="col-sm-12">
                  <label class="radio-inline">
                    <input type="radio" name="haunted" id="inlineRadio1" value="y">是
                  </label>
                  <label class="radio-inline">
                    <input type="radio" name="haunted" id="inlineRadio2" value="n"> 否
                  </label>
                  <hr />
                </div>
              </div> <!-- form-group // -->
              <div class="form-group">
                <div class="col-sm-12s">
                  <label class="control-label " for="date_start">屋齡:</label>
                  <input type="text" class="form-control" name="date_start" id="age" placeholder="輸入屋齡">
                  <hr />
                </div>
                <div class="col-sm-12">
                  <label class="control-label " for="date_finish">是否有電梯?</label>
                  <div class="col-sm-12">
                    <label class="radio-inline">
                      <input type="radio" name="elevator" id="elevator" value="y">是
                    </label>
                    <label class="radio-inline">
                      <input type="radio" name="elevator" id="#" value="n"> 否
                    </label>
                  </div>
                </div> <!-- form-group // -->
              </div> <!-- form-group // -->
            </div>
        </form>
      </div>
  </div>


  <div class="form-group">
    <label for="tech" class="col-sm-3 control-label"></label>
    <hr>
    <div class="form-group">
      <div class="col-sm-offset-3 col-sm-12">
        <button type="submit" class="btn btn-primary" onclick="submit()">送出</button>
      </div>
    </div> <!-- form-group // -->
    </form>
  </div>

  <script type="text/javascript">
    //處理submit,向後端回傳product資料
    function submit() {

      //從cookie中獲取members_id
      //let members_id = getCookie("id");
      let members_id = 1;

      //從表單中將值取出放進變數內儲存
      let productcol = document.getElementById("productcol").value;
      let layout = document.getElementById("layout").value;
      let location = document.getElementById("location").value;
      let detail = document.getElementById("detail").value;
      let square = document.getElementById("square").value;
      let age = document.getElementById("age").value;
      let price = document.getElementById("price").value;
      let haunted;
      let elevator;

      if (document.querySelector('input[name="haunted"]:checked').value == "y") {
        haunted = true;
      } else {
        haunted = false;
      }

      if (document.querySelector('input[name="elevator"]:checked').value == "y") {
        elevator = true;
      } else {
        elevator = false;
      }

      // 將資料組成object格式
      let data_object = {
        "members_id": members_id,
        "productcol": productcol,
        "layout": layout,
        "location": location,
        "detail": detail,
        "square": square,
        "age": age,
        "haunted": haunted,
        "elevator": elevator,
        "price": price
      };

      // 發出POST的AJAX請求
      $.ajax({
        type: "POST",
        url: "/NCU_MIS_SA/api/UploadProductController.do",
        data: JSON.stringify(data_object),
        crossDomain: true,
        cache: false,
        dataType: 'json',
        timeout: 5000,
        success: function (response) {

          //回報執行結果
          alert(response.message);

        },
        error: function () {
          alert("無法連線到伺服器！");
        }
      });
    }

    function changepic1() {
      $("#prompt1").css("display", "none");

      var reads = new FileReader();
      f = document.getElementById('file1').files[0];
      reads.readAsDataURL(f);

      reads.onload = function (e) {
        document.getElementById('img1').src = this.result;
        $("#img1").css("display", "block");
      };
    }

    function changepic2() {
      $("#prompt2").css("display", "none");

      var reads = new FileReader();
      f = document.getElementById('file2').files[0];
      reads.readAsDataURL(f);

      reads.onload = function (e) {
        document.getElementById('img2').src = this.result;
        $("#img2").css("display", "block");
      };
    }

    function resetpic() {
      $("#prompt1").css("display", "block");
      $("#prompt2").css("display", "block");

      document.getElementById('img1').src = "#";
      document.getElementById('img2').src = "#";

      $("#img1").css("display", "none");
      $("#img2").css("display", "none");

    }

    var VisibleMenu = ''; // 記錄目前顯示的子選單的 ID

    // 顯示或隱藏子選單
    function switchMenu(theMainMenu, theSubMenu, theEvent) {
      var SubMenu = document.getElementById(theSubMenu);
      var MainMenu = document.getElementById(theMainMenu);

      if (SubMenu.style.display == 'none') { // 顯示子選單
        SubMenu.style.minWidth = theMainMenu.clientWidth; // 讓子選單的最小寬度與主選單相同 (僅為了美觀)
        SubMenu.style.display = 'block';
        MainMenu.style.display == 'none';
        hideMenu(); // 隱藏子選單
        VisibleMenu = theSubMenu;
      } else { // 隱藏子選單
        if (theEvent != 'MouseOver' || VisibleMenu != theSubMenu) {
          SubMenu.style.display = 'none';
          MainMenu.style.display == 'block';
          VisibleMenu = '';
        }
      }
    }

    // 隱藏子選單
    function hideMenu() {
      if (VisibleMenu != '') {
        document.getElementById(VisibleMenu).style.display = 'none';
        MainMenu.style.display == 'block';
      }
      VisibleMenu = '';
    }

    //登入轉址判斷
    function jumpto(id) {
      var log = getCookie('logined');
      var el = document.getElementById(id);
      if (log != 1) {
        ;

        alert("請先完成登入!");
        document.location.href = "login.html";
      }

    }


    //讀取cookie值
    function getCookie(cname) {
      var name = cname + "=";
      var ca = document.cookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i].trim();
        if (c.indexOf(name) == 0) return c.substring(name.length, c.length);
      }
      return "";
    }

  </script>


  <footer id="contact" style="background-color: #f4f4f4;">
    <div class="container px-0">
      <div class="row justify-content-center">
        <div class="col-md-12 py-5">
          <div class="row">
            <div class="col-md-6 d-flex justify-content-around footer-block media">
              <div class="footer-box">
                <span class="font-weight-bold" style="margin-left: 15px;">相關社群</span>
                <div class="footer-content mt-3">
                  <div class="d-flex justify-content-around">
                    <a href="https://www.facebook.com/hhhfb" target="_blank">
                      <div class="footer-media">
                        <img class="footer-media-item" src="statics/img/facebook.png" alt="fb" width="60" height="60">
                      </div>
                    </a>
                    <a href="https://line.me/ti/p/%40ovs4341s" target="_blank" style="margin-left: 7px;">
                      <div class="footer-media">
                        <img class="footer-media-item" src="statics/img/skype.png" alt="skype" width="45" height="45">
                      </div>
                    </a>
                    <a href="https://www.youtube.com/user/gorgeousspace" target="_blank" style="margin-left: 11px;">
                      <div class="footer-media">
                        <img class="footer-media-item" src="statics/img/youtube.png" alt="youtube" width="52"
                          height="52">
                      </div>
                    </a>
                    <a href="https://www.instagram.com/gorgeous_space/" target="_blank">
                      <div class="footer-media">
                        <img class="footer-media-item" src="statics/img/instagram.png" alt="ig" width="64" height="49">
                      </div>
                    </a>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-6 d-flex justify-content-around footer-block">
              <div class="footer-box">
                <div class="footer-content text-center">
                  <span class="footer-content-tel">
                    矮人房屋網免付費諮詢信箱
                    <a href='mailto:zy3600924@gmail.com' class="text-primary text-photo-color"><i
                        class="fas fa-envelope-square" style="color:rgb(97, 97, 97);"></i> </a>
                  </span>
                  <div class="footer-note mt-3 d-flex justify-content-center px-3">
                    <div class="px-2 footer-note-item">
                      <span><a href="/about/contact" target="_blank">聯絡我們</a></span>
                    </div>
                    <div class="px-2 footer-note-item">
                      <span><a href="/about/privacy_policy" target="_blank">隱私保護</a></span>
                    </div>
                    <div class="px-2 footer-note-item">
                      <span><a href="/about" target="_blank">關於本站</a></span>
                    </div>
                  </div>
                  <div class="footer-note mt-2 d-flex px-3">
                    <div class="px-2 footer-note-item">
                      <span><a href="/about/timeline" target="_blank">公司歷程</a></span>
                    </div>
                    <div class="px-2 footer-note-item">
                      <span><a href="https://www.104.com.tw/company/d6hr8sg" target="_blank">工作機會</a></span>
                    </div>
                    <div class="px-2 footer-note-item">
                      <span><a href="/about/sitemap" target="_blank">網站地圖</a></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
</body>

</html>
